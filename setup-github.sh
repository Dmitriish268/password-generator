#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./setup-github.sh YOUR_USERNAME REPO_NAME

set -e

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${BLUE}üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è Password Generator${NC}\n"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
if [ -z "$1" ] || [ -z "$2" ]; then
    echo -e "${YELLOW}–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./setup-github.sh YOUR_USERNAME REPO_NAME${NC}"
    echo "–ü—Ä–∏–º–µ—Ä: ./setup-github.sh dmitriisharin password-generator"
    exit 1
fi

USERNAME=$1
REPO_NAME=$2

echo -e "${GREEN}‚úì${NC} Username: $USERNAME"
echo -e "${GREEN}‚úì${NC} Repository name: $REPO_NAME"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –º—ã –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
if [ ! -d ".git" ]; then
    echo -e "${YELLOW}–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è...${NC}"
    git init
    git add .
    git commit -m "Initial commit: Password Generator"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è remote
if git remote get-url origin > /dev/null 2>&1; then
    echo -e "${YELLOW}Remote 'origin' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...${NC}"
    git remote set-url origin "https://github.com/$USERNAME/$REPO_NAME.git"
else
    echo -e "${GREEN}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ remote 'origin'...${NC}"
    git remote add origin "https://github.com/$USERNAME/$REPO_NAME.git"
fi

# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –≤ main –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
current_branch=$(git branch --show-current)
if [ "$current_branch" != "main" ]; then
    echo -e "${GREEN}–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –≤ 'main'...${NC}"
    git branch -M main
fi

echo ""
echo -e "${YELLOW}üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:${NC}"
echo ""
echo -e "1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub:"
echo -e "   ${BLUE}https://github.com/new${NC}"
echo ""
echo -e "   –ù–∞–∑–≤–∞–Ω–∏–µ: ${GREEN}$REPO_NAME${NC}"
echo -e "   –û–ø–∏—Å–∞–Ω–∏–µ: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π —Å —Ä–∞—Å—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤–∑–ª–æ–º–∞"
echo -e "   –í–∏–¥–∏–º–æ—Å—Ç—å: Public –∏–ª–∏ Private"
echo -e "   ${YELLOW}–ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ README, .gitignore –∏–ª–∏ –ª–∏—Ü–µ–Ω–∑–∏—é!${NC}"
echo ""
echo -e "2. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo -e "   ${BLUE}git push -u origin main${NC}"
echo ""
echo -e "3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Pages:"
echo -e "   Settings ‚Üí Pages ‚Üí Source: ${GREEN}main${NC} branch"
echo ""
echo -e "${GREEN}‚úì${NC} –í—Å–µ –≥–æ—Ç–æ–≤–æ! –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ."

